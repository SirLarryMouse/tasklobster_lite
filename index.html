<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskLobster</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,500&family=Manrope:wght@300;400;500;600;700&family=Sora:wght@300;400;500;600;700;800&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="sidebar" id="app">

        <!-- Header -->
        <div class="header">
            <div class="brand">
                <div class="logo">Task<span class="accent">Lobster</span></div>
                <div class="greeting" id="greeting">Good morning, here's your day.</div>
            </div>
            <div class="header-right">
                <div class="header-time" id="header-time">9:22 AM</div>
                <div class="header-date" id="header-date">Wednesday, Apr 23</div>
            </div>
        </div>
        <div class="header-rule"></div>

        <!-- Start Day Screen (shown before day starts) -->
        <div id="start-day-screen" class="start-day-screen" style="display: none;">
            <div class="start-day-content">
                <div class="start-day-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                </div>
                <h2 class="start-day-title">Ready to begin?</h2>
                <p class="start-day-text">You have <strong id="start-day-task-count">0</strong> tasks queued up. Start your day to begin tracking time.</p>
                <button class="btn-start-day" id="start-day-btn">Start Day</button>
                <button class="btn-add-first" id="start-day-add-btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                    Add tasks first
                </button>
            </div>
        </div>

        <!-- Main Content (shown after day starts) -->
        <div id="main-content" style="display: none;">

            <!-- Briefing -->
            <div class="briefing" id="briefing">
                <div class="briefing-text" id="briefing-text">You have <strong>0 tasks</strong> remaining today.</div>
            </div>

            <!-- Current Task Section -->
            <div class="focus-section" id="focus-section" style="display: none;">
                <div class="section-eyebrow">Right Now</div>
                <div class="focus-card">
                    <div class="focus-top">
                        <div class="focus-status-row">
                            <div class="status-live" id="status-live">
                                <span class="live-dot"></span>
                                In Progress
                            </div>
                            <div class="time-remaining" id="current-task-time-remaining">25 min left</div>
                        </div>
                        <h3 class="task-title" id="current-task-name">Complete Project Proposal</h3>
                        <p class="task-desc" id="current-task-description">Finalize the proposal for the client meeting next week.</p>
                        <div class="tags-row" id="current-task-tags"></div>
                        <div class="progress-row">
                            <div class="progress-pct" id="current-task-progress">0<sup>%</sup></div>
                            <div class="progress-right">
                                <div class="progress-track">
                                    <div class="progress-fill" id="current-task-progress-bar" style="width: 0%"></div>
                                </div>
                                <div class="progress-note" id="progress-note">On track</div>
                            </div>
                        </div>
                    </div>
                    <div class="actions-strip">
                        <button class="action-btn btn-pause" id="pause-btn">
                            <span class="icon-circle">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/></svg>
                            </span>
                            Pause
                        </button>
                        <button class="action-btn btn-reschedule" id="reschedule-btn">
                            <span class="icon-circle">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                            </span>
                            Later
                        </button>
                        <button class="action-btn btn-complete" id="complete-btn">
                            <span class="icon-circle">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
                            </span>
                            Done
                        </button>
                        <button class="action-btn btn-distracted" id="distracted-btn">
                            <span class="icon-circle">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                            </span>
                            Off Track
                        </button>
                    </div>
                    <div class="focus-meta">
                        <div class="meta-cell">
                            <div class="meta-label">Deadline</div>
                            <div class="meta-val" id="current-task-deadline">No deadline set</div>
                        </div>
                        <div class="meta-cell">
                            <div class="meta-label">Priority</div>
                            <div class="meta-val" id="current-task-priority">
                                <span class="priority-bar"></span>
                                Medium
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- No Tasks Message -->
            <div id="no-tasks-message" class="no-tasks" style="display: none;">
                <div class="no-tasks-icon">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--silver)" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                </div>
                <div class="no-tasks-text">No tasks added yet</div>
                <div class="no-tasks-subtext">Tap the + button to create your first task.</div>
            </div>

            <!-- Schedule Section -->
            <div id="schedule-section" class="schedule-section" style="display: none;">
                <div class="section-eyebrow">Today's Schedule</div>
                <div class="schedule-card">
                    <div class="schedule-scroll" id="schedule-scroll">
                        <div class="schedule-track" id="schedule-track">
                            <!-- Time labels and blocks rendered by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Queue Section -->
            <div class="queue-section" id="queue-section" style="display: none;">
                <div class="section-eyebrow">Coming Up</div>
                <div class="queue-header">
                    <div class="queue-title-group">
                        <span class="queue-title">Your Queue</span>
                        <span class="queue-count" id="queue-count">0 tasks</span>
                    </div>
                    <button class="add-btn" id="add-task-btn" title="Add new task">+</button>
                </div>
                <div class="queue-list" id="tasks-list">
                    <!-- Queue items rendered by JS -->
                </div>
            </div>

        </div><!-- /main-content -->

        <!-- Footer -->
        <div class="footer" id="footer">
            <div class="footer-left">
                <div class="footer-stat">Done <strong id="completed-count">0 / 0</strong></div>
                <div class="footer-stat">Focus <strong id="focus-time">0 mins</strong></div>
            </div>
            <div class="footer-actions">
                <button class="footer-icon-btn" id="dark-mode-toggle" title="Toggle dark mode">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                </button>
                <button class="footer-icon-btn" id="options-toggle" title="Options">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                </button>
                <button class="footer-icon-btn btn-end-day" id="end-day-btn" title="End Day" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="9" y1="9" x2="15" y2="15"/><line x1="15" y1="9" x2="9" y2="15"/></svg>
                </button>
            </div>
        </div>

    </div><!-- /sidebar -->

    <!-- Options Slide Panel -->
    <div class="panel-overlay" id="options-panel-overlay">
        <div class="panel" id="options-panel">
            <div class="panel-header">
                <h3 class="panel-title">Options</h3>
                <button class="panel-close" id="options-close">&times;</button>
            </div>
            <div class="panel-body">
                <div class="panel-section">
                    <div class="panel-section-title">Appearance</div>
                    <div class="panel-option">
                        <label class="form-label">Style</label>
                        <div class="style-toggle-buttons">
                            <button type="button" class="style-toggle-btn" data-style="executive">Executive</button>
                            <button type="button" class="style-toggle-btn" data-style="boil">TaskLobster</button>
                        </div>
                    </div>
                </div>
                <div class="panel-section">
                    <div class="panel-section-title">Import / Export</div>
                    <div class="panel-option">
                        <label class="form-label">Import Tasks (todo.txt)</label>
                        <textarea id="import-text" class="form-input" rows="4" placeholder="Paste todo.txt content here..."></textarea>
                        <button class="btn btn-primary w-full mt-8" id="import-btn">Import Tasks</button>
                    </div>
                    <div class="panel-option">
                        <button class="btn btn-outline w-full" id="export-btn">Export Tasks (todo.txt)</button>
                    </div>
                    <div class="panel-option">
                        <button class="btn btn-outline w-full" id="timesheet-btn">Generate Timesheet</button>
                    </div>
                    <div id="export-output" class="export-output" style="display: none;">
                        <label class="form-label">Output</label>
                        <textarea id="export-text" class="form-input" rows="4" readonly></textarea>
                        <button class="btn btn-outline w-full mt-8" id="copy-export-btn">Copy to Clipboard</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div class="modal-overlay" id="add-task-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Add New Task</h3>
                <button class="modal-close" id="cancel-task-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="task-form">
                    <div class="form-group">
                        <label for="task-name-input" class="form-label">Task Name</label>
                        <input type="text" id="task-name-input" class="form-input" placeholder="Enter task name" required>
                    </div>
                    <div class="form-group">
                        <label for="task-description-input" class="form-label">Description</label>
                        <textarea id="task-description-input" class="form-input" rows="2" placeholder="Enter task description"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estimated Duration</label>
                        <div class="duration-buttons">
                            <button type="button" class="duration-btn" data-duration="5">5m</button>
                            <button type="button" class="duration-btn" data-duration="15">15m</button>
                            <button type="button" class="duration-btn" data-duration="30">30m</button>
                            <button type="button" class="duration-btn" data-duration="60">1h</button>
                            <button type="button" class="duration-btn" data-duration="120">2h</button>
                        </div>
                        <input type="hidden" id="task-duration-input" value="30">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <div class="priority-slider">
                            <div class="priority-labels">
                                <span>Low</span>
                                <span>Medium</span>
                                <span>High</span>
                                <span>Urgent</span>
                            </div>
                            <input type="range" min="1" max="5" value="3" id="task-priority-input" class="priority-range">
                            <div class="priority-indicator-container">
                                <div class="priority-indicator-label" id="priority-label">Medium</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="task-tags-input" class="form-label">Tags (comma separated)</label>
                        <input type="text" id="task-tags-input" class="form-input" placeholder="Work, Personal, Urgent">
                    </div>
                    <div class="form-group">
                        <label for="task-deadline-input" class="form-label">Deadline (optional)</label>
                        <input type="date" id="task-deadline-input" class="form-input">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-task-btn-2">Cancel</button>
                <button class="btn btn-primary" id="save-task-btn">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Pause Reason Modal -->
    <div class="modal-overlay" id="pause-reason-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Taking a break?</h3>
                <button class="modal-close" id="cancel-pause-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">What's the reason?</label>
                    <div class="pause-reason-buttons">
                        <button type="button" class="pause-reason-btn" data-reason="meeting">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 1 0 7.75"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                            Meeting
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="bathroom">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></svg>
                            Bathroom
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="break">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/></svg>
                            Break
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="other">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                            Other
                        </button>
                    </div>
                </div>
                <div class="form-group" id="other-reason-group" style="display: none;">
                    <label for="other-reason-input" class="form-label">Please specify:</label>
                    <input type="text" id="other-reason-input" class="form-input" placeholder="Enter your reason">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-pause-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-pause-btn">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Timesheet Modal -->
    <div class="modal-overlay" id="timesheet-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Today's Timesheet</h3>
                <button class="modal-close" id="close-timesheet-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="timesheet-content" id="timesheet-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="close-timesheet-btn">Close</button>
                <button class="btn btn-primary" id="download-timesheet-btn">Download</button>
            </div>
        </div>
    </div>

    <!-- End Day Modal -->
    <div class="modal-overlay" id="end-day-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">End Your Day</h3>
            </div>
            <div class="modal-body">
                <p class="end-day-summary" id="end-day-summary">Great work today.</p>
                <div class="end-day-stats" id="end-day-stats"></div>
                <div class="form-group mt-16">
                    <label class="form-label">Would you like to export?</label>
                    <div class="end-day-export-options">
                        <label class="checkbox-label"><input type="checkbox" id="end-day-export-timesheet" checked> Download Timesheet (CSV)</label>
                        <label class="checkbox-label"><input type="checkbox" id="end-day-export-todo" checked> Download todo.txt</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-end-day-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-end-day-btn">End Day</button>
            </div>
        </div>
    </div>

    <!-- Break Timer Overlay -->
    <div class="break-timer-overlay" id="break-timer-overlay">
        <div class="break-timer-container">
            <div class="break-timer-title">On Break</div>
            <div class="break-timer-reason" id="break-timer-reason">Meeting</div>
            <div class="break-timer-display" id="break-timer-display">00:00</div>
            <button class="btn btn-primary w-full" id="resume-break-btn">Resume Work</button>
            <div class="break-notes-container" id="break-notes-container">
                <p class="break-notes-prompt">Any notes about this break?</p>
                <input type="text" class="form-input" id="break-notes-input" placeholder="Optional notes...">
                <button class="btn btn-primary w-full mt-8" id="save-break-notes-btn">Save & Resume</button>
                <button class="btn btn-outline w-full mt-8" id="skip-break-notes-btn">Skip</button>
            </div>
        </div>
    </div>

    <!-- Task Switch Confirmation Modal -->
    <div class="modal-overlay" id="task-switch-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="switch-modal-title">Switch Tasks?</h3>
            </div>
            <div class="modal-body">
                <p id="switch-modal-question">Switch from "<span id="current-task-name-confirm"></span>" to "<span id="new-task-name-confirm"></span>"?</p>
                <div id="new-task-section">
                    <p>You'll be switching to: <strong><span id="new-task-name-confirm-2"></span></strong></p>
                </div>
                <div id="progress-slider-container" style="display: none; margin-top: 16px;">
                    <p>Estimated task completion progress:</p>
                    <div class="slider-container">
                        <input type="range" id="progress-slider" min="0" max="100" step="5" value="0" class="priority-range">
                        <div class="slider-value" id="progress-value">0%</div>
                    </div>
                    <p class="progress-note">This will recalculate the estimated time remaining.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-switch-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-switch-btn">Switch Tasks</button>
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div class="custom-tooltip" id="custom-tooltip"></div>

    <script src="script.js"></script>
</body>
</html>
