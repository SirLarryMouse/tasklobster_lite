<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskLobster</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-text">
                <span class="red">Task</span><span class="blue">Lobster</span>
                <span class="version">Free Version</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Task Dashboard</h1>
                <div class="date-display" id="current-date">Wednesday, April 23, 2025</div>
            </div>
            <button class="add-task-btn" id="add-task-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 5v14M5 12h14"></path>
                </svg>
                Add New Task
            </button>
        </div>

        <div class="dashboard-layout">
            <div class="task-section">
                <!-- Current Task Card -->
                <div id="current-task-card" class="card" style="display: none;">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="icon-bg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#bfdbfe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                            </div>
                            <div>
                                <h2 class="card-title">Current Focus</h2>
                                <p class="card-subtitle">Current task in progress</p>
                            </div>
                        </div>
                        <div class="card-header-right">
                            <div class="time-badge">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                <span id="current-task-time-remaining">25 mins remaining</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="task-name" id="current-task-name">Complete Project Proposal</h3>
                        <p class="task-description" id="current-task-description">Finalize the proposal for the client meeting next week. Include budget estimates and timeline.</p>
                        
                        <div class="task-progress">
                            <div class="task-tags" id="current-task-tags">
                                <!-- Tags will be populated by JavaScript -->
                            </div>
                            <div class="progress-text">
                                Progress: <span class="progress-value" id="current-task-progress">45%</span>
                            </div>
                        </div>
                        
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="current-task-progress-bar" style="width: 45%;"></div>
                        </div>
                        
                        <div class="task-actions">
                            <button class="btn btn-primary" id="pause-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="6" y="4" width="4" height="16"></rect>
                                    <rect x="14" y="4" width="4" height="16"></rect>
                                </svg>
                                Pause
                            </button>
                            <button class="btn btn-outline" id="reschedule-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="5 4 15 12 5 20 5 4"></polygon>
                                    <line x1="19" y1="5" x2="19" y2="19"></line>
                                </svg>
                                Reschedule
                            </button>
                            <button class="btn btn-blue" id="complete-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                                Complete
                            </button>
                            <button class="btn btn-red" id="distracted-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                                </svg>
                                Distracted
                            </button>
                        </div>
                        
                        <div class="task-details">
                            <div class="detail-label">Deadline</div>
                            <div class="detail-value">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#b91c1c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                <span class="detail-value-text" id="current-task-deadline">Friday, March 29 (2 days)</span>
                            </div>
                            <div class="detail-label mt-10">Priority</div>
                            <div class="detail-value" id="current-task-priority">
                                <div class="priority-indicator medium"></div>
                                <span class="detail-value-text">Medium</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- No Tasks Message (shown when no tasks exist) -->
                <div id="no-tasks-message" class="no-tasks">
                    <div class="no-tasks-icon">ðŸ“‹</div>
                    <div class="no-tasks-text">No tasks added yet</div>
                    <div class="no-tasks-subtext">Click the "Add New Task" button to create your first task.</div>
                </div>

                <!-- Tasks Container -->
                <div id="tasks-container" class="card" style="display: none;">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="icon-bg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#bfdbfe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                            </div>
                            <div>
                                <h2 class="card-title">Task Manager</h2>
                                <p class="card-subtitle">Manage your tasks</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card-tabs">
                        <button class="card-tab active" data-tab="queue">Queue</button>
                        <button class="card-tab" data-tab="import-export">Import/Export</button>
                    </div>
                    
                    <div class="card-content">
                        <!-- Task Queue Tab -->
                        <div class="tab-content active" id="queue-tab">
                            <div class="tasks-list" id="tasks-list">
                                <!-- Task items will be added here via JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Import/Export Tab -->
                        <div class="tab-content" id="import-export-tab">
                            <div class="import-export-container">
                                <div class="import-export-option">
                                    <h3 class="import-export-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="17 8 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        Import Tasks (todo.txt format)
                                    </h3>
                                    <p class="import-export-description">Import tasks from a todo.txt formatted file.</p>
                                    <div class="import-field">
                                        <textarea id="import-text" class="form-input" rows="5" placeholder="Paste todo.txt content here..."></textarea>
                                    </div>
                                    <button class="btn btn-primary w-full" id="import-btn">Import Tasks</button>
                                </div>
                                
                                <div class="import-export-option">
                                    <h3 class="import-export-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        Export Tasks (todo.txt format)
                                    </h3>
                                    <p class="import-export-description">Export all your tasks in todo.txt format.</p>
                                    <button class="btn btn-primary w-full" id="export-btn">Export Tasks</button>
                                </div>
                                
                                <div class="import-export-option">
                                    <h3 class="import-export-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                            <polyline points="10 9 9 9 8 9"></polyline>
                                        </svg>
                                        Generate Timesheet
                                    </h3>
                                    <p class="import-export-description">Generate a timesheet report for today's tasks.</p>
                                    <button class="btn btn-primary w-full" id="timesheet-btn">Generate Timesheet</button>
                                </div>
                                
                                <div id="export-output" class="export-output" style="display: none;">
                                    <h3 class="import-export-title">Output</h3>
                                    <div class="export-text-container">
                                        <textarea id="export-text" class="form-input" rows="5" readonly></textarea>
                                    </div>
                                    <button class="btn btn-outline w-full" id="copy-export-btn">Copy to Clipboard</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule -->
            <div class="card schedule-container">
                <div class="card-header">
                    <div class="card-header-left">
                        <div class="icon-bg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#bfdbfe" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                        </div>
                        <div>
                            <h2 class="card-title">Today's Schedule</h2>
                        </div>
                    </div>
                    <div class="card-header-right">
                        <div class="time-badge" id="current-time">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            9:22 AM
                        </div>
                    </div>
                </div>
                
                <div class="time-column">
                    <!-- Time labels will be added here via JavaScript -->
                </div>
                
                <div class="schedule-content" id="schedule-content">
                    <!-- Hour dividers and schedule items will be added here via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Footer with stats -->
        <div class="app-footer">
            <div class="footer-stat">
                <div class="stat-icon-bg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#93c5fd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <div class="stat-text">Tasks Completed: <span class="stat-value" id="completed-count">0 / 0</span></div>
            </div>
            <div class="footer-stat">
                <div class="stat-icon-bg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#93c5fd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="stat-text">Focus Time: <span class="stat-value" id="focus-time">0 hrs</span></div>
            </div>
            <button class="upgrade-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="16 12 12 8 8 12"></polyline>
                    <line x1="12" y1="16" x2="12" y2="8"></line>
                </svg>
                Upgrade to Pro
            </button>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div class="modal-overlay" id="add-task-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Add New Task</h3>
            </div>
            <div class="modal-body">
                <form id="task-form">
                    <div class="form-group">
                        <label for="task-name-input" class="form-label">Task Name</label>
                        <input type="text" id="task-name-input" class="form-input" placeholder="Enter task name" required>
                    </div>
                    <div class="form-group">
                        <label for="task-description-input" class="form-label">Description</label>
                        <textarea id="task-description-input" class="form-input" rows="3" placeholder="Enter task description"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estimated Duration</label>
                        <div class="duration-buttons">
                            <button type="button" class="duration-btn" data-duration="5">5 min</button>
                            <button type="button" class="duration-btn" data-duration="15">15 min</button>
                            <button type="button" class="duration-btn" data-duration="30">30 min</button>
                            <button type="button" class="duration-btn" data-duration="60">1 hour</button>
                            <button type="button" class="duration-btn" data-duration="120">2 hours</button>
                        </div>
                        <input type="hidden" id="task-duration-input" value="30">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <div class="priority-slider">
                            <div class="priority-labels">
                                <span>Low</span>
                                <span>Medium</span>
                                <span>High</span>
                                <span>Urgent</span>
                            </div>
                            <input type="range" min="1" max="5" value="3" id="task-priority-input" class="priority-range">
                            <div class="priority-indicator-container">
                                <div class="priority-indicator-label" id="priority-label">Medium</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="task-tags-input" class="form-label">Tags (comma separated)</label>
                        <input type="text" id="task-tags-input" class="form-input" placeholder="Work, Personal, Urgent">
                    </div>
                    <div class="form-group">
                        <label for="task-deadline-input" class="form-label">Deadline (optional)</label>
                        <input type="date" id="task-deadline-input" class="form-input">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-task-btn">Cancel</button>
                <button class="btn btn-primary" id="save-task-btn">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Pause Reason Modal -->
    <div class="modal-overlay" id="pause-reason-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Pause Reason</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Why are you pausing this task?</label>
                    <div class="pause-reason-buttons">
                        <button type="button" class="pause-reason-btn" data-reason="meeting">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 1 0 7.75"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            Meeting
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="bathroom">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>
                            </svg>
                            Bathroom
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="break">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                                <line x1="6" y1="1" x2="6" y2="4"></line>
                                <line x1="10" y1="1" x2="10" y2="4"></line>
                                <line x1="14" y1="1" x2="14" y2="4"></line>
                            </svg>
                            Break
                        </button>
                        <button type="button" class="pause-reason-btn" data-reason="other">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            Other
                        </button>
                    </div>
                </div>
                <div class="form-group" id="other-reason-group" style="display: none;">
                    <label for="other-reason-input" class="form-label">Please specify:</label>
                    <input type="text" id="other-reason-input" class="form-input" placeholder="Enter your reason">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-pause-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-pause-btn">Confirm Pause</button>
            </div>
        </div>
    </div>

    <!-- Export Timesheet Modal -->
    <div class="modal-overlay" id="timesheet-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Today's Timesheet</h3>
            </div>
            <div class="modal-body">
                <div class="timesheet-content" id="timesheet-content">
                    <!-- Timesheet will be generated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="close-timesheet-btn">Close</button>
                <button class="btn btn-primary" id="download-timesheet-btn">Download</button>
            </div>
        </div>
    </div>

    <!-- Break Timer Overlay -->
    <div class="break-timer-overlay" id="break-timer-overlay">
        <div class="break-timer-container">
            <div class="break-timer-title">On Break</div>
            <div class="break-timer-reason" id="break-timer-reason">Meeting</div>
            <div class="break-timer-display" id="break-timer-display">00:00</div>
            <button class="btn btn-primary w-full" id="resume-break-btn">Resume Work</button>
            
            <div class="break-notes-container" id="break-notes-container">
                <p class="text-sm text-gray-700 mb-2">Any additional notes about this break?</p>
                <input type="text" class="break-notes-input" id="break-notes-input" placeholder="Optional notes...">
                <button class="btn btn-primary w-full" id="save-break-notes-btn">Save & Resume</button>
                <button class="btn btn-outline w-full mt-2" id="skip-break-notes-btn">Skip</button>
            </div>
        </div>
    </div>

    <!-- Task Switch Confirmation Modal -->
    <div class="modal-overlay" id="task-switch-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="switch-modal-title">Switch Tasks?</h3>
            </div>
            <div class="modal-body">
                <p id="switch-modal-question">Are you sure you want to switch from "<span id="current-task-name-confirm"></span>" to "<span id="new-task-name-confirm"></span>"?</p>
                
                <!-- New Task Section (for task switching) -->
                <div id="new-task-section">
                    <p>You'll be switching to: <strong><span id="new-task-name-confirm"></span></strong></p>
                </div>
                
                <!-- Progress Slider Section (for rescheduling) -->
                <div id="progress-slider-container" style="display: none; margin-top: 20px;">
                    <p>Estimated task completion progress:</p>
                    <div class="slider-container">
                        <input type="range" id="progress-slider" min="0" max="100" step="5" value="0" class="slider">
                        <div class="slider-value" id="progress-value">0%</div>
                    </div>
                    <p class="slider-help-text">This will recalculate the estimated time remaining based on your progress.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-switch-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-switch-btn">Switch Tasks</button>
            </div>
        </div>
    </div>

    <script src="variables.js"></script>
    <script src="ui.js"></script>
    <script src="schedule.js"></script>
    <script src="tasks.js"></script>
    <script src="timeTracking.js"></script>
    <script src="modals.js"></script>
    <script src="importExport.js"></script>
    <script src="init.js"></script>
</body>
</html>